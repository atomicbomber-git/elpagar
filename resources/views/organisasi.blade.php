@extends('layouts.layouts') @push('css') <link rel="stylesheet" type="text/css" href="assets/bootstrap-datepicker/css/datepicker.css" /> <link rel="stylesheet" type="text/css" href="assets/bootstrap-colorpicker/css/colorpicker.css" /> <link rel="stylesheet" type="text/css" href="assets/bootstrap-daterangepicker/daterangepicker.css" /> <link href="assets/advanced-datatable/media/css/demo_page.css" rel="stylesheet" /> <link href="assets/advanced-datatable/media/css/demo_table.css" rel="stylesheet" /> <link rel="stylesheet" href="assets/data-tables/DT_bootstrap.css" /> <!-- Custom styles for this template --> <link href="css/style.css" rel="stylesheet"> <link href="css/style-responsive.css" rel="stylesheet" /> <link href="http://www.getorgchart.com/GetOrgChart/getorgchart/getorgchart.css" rel="stylesheet" /> @endpush @section('content') <div class="row"> <div id="organisasi"> </div> </div> <div class="row"> <div class="col-lg-12"> <section class="panel"> <header class="panel-heading"> <i class="fa fa-tag"></i>	Organisasi </header> <div class="panel-body"> <div class="container-fluid"> <div class="pull-right"> <button class="btn btn-success" data-toggle="modal" href="#modalTambah"><i class="fa fa-plus"></i> Tambah</button> </div> <div class="adv-table"> <table cellpadding="0" cellspacing="0" border="0" class="display table table-bordered table-striped table-advance table-hover" id="TabelOrganisasi"> <thead> <tr> <th>ID</th> <th>Parent id</th> <th>Foto</th> <th>Nama</th> <th>Jabatan</th> <th>NIP</th> <th></th> </tr> </thead> <tbody> @foreach($organisasis as $no => $organisasi) <tr> <td>{{$organisasi->id}}</td> <td>{{$organisasi->parent_id}}</td> <td><img src="{{$organisasi->foto}}" class="img img-responsive" style="height: 100px;"></td> <td>{{$organisasi->nama}}</td> <td>{{$organisasi->jabatan}}</td> <td>{{$organisasi->nip}}</td> <td> <button class="btn btn-xs btn-primary" data-toggle="modal" href="#modalUbah{{$organisasi->id}}"><i class="fa fa-pencil"></i></button> <button class="btn btn-xs btn-danger" data-toggle="modal" href="#modalHapus{{$organisasi->id}}"><i class="fa fa-trash"></i></button> </td> </tr> @endforeach </tbody> </table> </div> </div> </section> </div> </div> <!-- MODAL COLLECTIONS --> <!-- Modal Tambah --> <div class="modal fade" id="modalTambah" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header" style="background-color: green;"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h4 class="modal-title">Tambah Keanggotaan</h4> </div> <div class="modal-body"> <form method="POST"> <input type="hidden" name="_token" value="{{ csrf_token() }}"> <div class="form-group"> <label class="control-label">Foto</label> <div class="input-group"> <span class="input-group-btn"> <a id="lfm" data-input="thumbnail" data-preview="holder" class="btn btn-warning"> <i class="fa fa-picture-o"></i> Pilih </a> </span> <input id="thumbnail" class="form-control" type="text" name="foto"> </div> <div id="hintThumb"></div> <div class="container-fluid"> <center><img id="holder" style="margin-top:15px;max-height:100px;" src=""></center> </div> </div> <div class="form-group"> <label class="control-label">Nama</label> <input type="text" name="nama" class="form-control" required="" maxlength="255"> </div> <div class="form-group"> <label class="control-label">Jabatan</label> <input type="text" name="jabatan" class="form-control" required="" maxlength="255"> </div> <div class="form-group"> <label class="control-label">NIP</label> <input type="number" name="nip" class="form-control" required="" maxlength="255"> </div> <div class="form-group"> <label class="control-label">Parent id</label> <select class="form-control" name="parent"> <option value=""></option> @foreach($orgs as $i => $org) <option value="{{$org->id}}">{{$org->jabatan}}</option> @endforeach </select> </div> <div class="modal-footer"> <button type="submit" class="btn btn-success">Tambah <i class="fa fa-chevron-right"></i></button> </div> </form> </div> </div> </div> </div> <!-- END modal tambah--> @foreach($organisasis as $organisasi) <!-- Modal ubah --> <div class="modal fade" id="modalUbah{{$organisasi->id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h4 class="modal-title">Ubah organisasi</h4> </div> <div class="modal-body"> <form method="POST"> <input type="hidden" name="_token" value="{{ csrf_token() }}"> <input type="hidden" name="_method" value="PUT"> <input type="hidden" name="id" value="{{$organisasi->id}}"> <div class="form-group"> <label class="control-label">Foto</label> <div class="input-group"> <span class="input-group-btn"> <a id="lfm{{$organisasi->id}}" data-input="thumbnail{{$organisasi->id}}" data-preview="holder{{$organisasi->id}}" class="btn btn-warning"> <i class="fa fa-picture-o"></i> Pilih </a> </span> <input id="thumbnail{{$organisasi->id}}" class="form-control" type="text" name="foto" value="{{$organisasi->foto}}"> </div> <div id="hintThumb"></div> <div class="container-fluid"> <center><img id="holder{{$organisasi->id}}" style="margin-top:15px;max-height:100px;" src="{{$organisasi->foto}}"></center> </div> </div> <div class="form-group"> <label class="control-label">Nama</label> <input type="text" name="nama" class="form-control" required="" maxlength="255" value="{{$organisasi->nama}}"> </div> <div class="form-group"> <label class="control-label">Jabatan</label> <input type="text" name="jabatan" class="form-control" required="" maxlength="255" value="{{$organisasi->jabatan}}"> </div> <div class="form-group"> <label class="control-label">NIP</label> <input type="number" name="nip" class="form-control" required="" maxlength="255" value="{{$organisasi->nip}}"> </div> <div class="form-group"> <label class="control-label">Parent Id</label> <select class="form-control" name="parent"> <option value=""></option> @foreach($orgs as $i => $org) <option value="{{$org->id}}" @if($org->id==$organisasi->parent_id) selected @endif>{{$org->jabatan}}</option> @endforeach </select> </div> <div class="modal-footer"> <button type="submit" class="btn btn-primary">Ubah <i class="fa fa-chevron-right"></i></button> </div> </form> </div> </div> </div> </div> <!-- END modal ubah--> <!-- Modal hapus --> <div class="modal fade" id="modalHapus{{$organisasi->id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog modal-sm"> <div class="modal-content"> <div class="modal-header" style="background-color: red;"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h4 class="modal-title">Hapus organisasi</h4> </div> <div class="modal-body"> <form method="POST"> <input type="hidden" name="_token" value="{{ csrf_token() }}"> <input type="hidden" name="_method" value="DELETE"> <input type="hidden" name="id" value="{{$organisasi->id}}"> <center> <p>Apakah anda yakin akan menghapus organisasi</p> <p><strong>{{$organisasi->nama}}</strong> ?</p> </center> <div class="modal-footer"> <button type="submit" class="btn btn-danger">Hapus <i class="fa fa-chevron-right"></i></button> </div> </form> </div> </div> </div> </div> <!-- END modal hapus--> @endforeach <!-- MODAL COLLECTIONS --> @endsection @push('js') <!-- js placed at the end of the document so the pages load faster --> <!--<script src="js/jquery.js"></script>--> <script type="text/javascript" language="javascript" src="/admin/assets/advanced-datatable/media/js/jquery.js"></script> <script src="/admin/js/bootstrap.min.js"></script> <script class="include" type="text/javascript" src="/admin/js/jquery.dcjqaccordion.2.7.js"></script> <script src="/admin/js/jquery.scrollTo.min.js"></script> <script src="/admin/js/jquery.nicescroll.js" type="text/javascript"></script> <script src="/admin/js/respond.min.js" ></script> <script type="text/javascript" language="javascript" src="/admin/assets/advanced-datatable/media/js/jquery.dataTables.js"></script> <script type="text/javascript" src="/admin/assets/data-tables/DT_bootstrap.js"></script> <!--common script for all pages--> <script src="js/common-scripts.js"></script> <script type="text/javascript"> $(document).ready(function() {$('#TabelOrganisasi').dataTable(); }); </script> <script src="http://www.getorgchart.com/GetOrgChart/getorgchart/getorgchart.js"></script> <script type="text/javascript"> $.getJSON("/data-organisasi", function (source) {var peopleElement = document.getElementById("organisasi"); var orgChart = new getOrgChart(peopleElement, {idField: "id", parentIdField: "parent_id", enableZoom: false, theme: "deborah", primaryFields: ["nama", "jabatan"], photoFields: ["foto"], linkType: "B", enableEdit: false, enableDetailsView: true, dataSource: source }); }); </script> </script> <script src="/vendor/laravel-filemanager/js/lfm.js"></script> <!--script for this page only--> <script type="text/javascript" charset="utf-8"> $('#lfm').filemanager('image'); @foreach($organisasis as $organisasi) $('#lfm{{$organisasi->id}}').filemanager('image'); @endforeach </script> @endpush