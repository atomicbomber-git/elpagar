<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\homepage; use Image; class homepage_widget extends Controller {public function __construct() {$this->middleware('auth'); } public function tampil() {$homepage = homepage::all(); return view('homepage-widget',['sidebars'=>$homepage]); } public function tambah(Request $request) {if($request->hasFile('foto')){$foto = $request->file('foto'); $filename = time() . '.' . $foto->getClientOriginalExtension(); Image::make($foto)->resize(264, 156)->save('img/widget/' . $filename); } else {$filename = null; } $homepage = new homepage; $homepage->judul = $request->judul; $homepage->lokasi = $request->lokasi; $homepage->foto = $filename; $homepage->link = $request->link; $homepage->html = $request->html; $homepage->save(); return redirect()->action('homepage_widget@tampil'); } public function ubah(Request $request) {$homepage = homepage::find($request->id); $homepage->judul = $request->judul; $homepage->lokasi = $request->lokasi; if (isset($request->foto)) {if($request->hasFile('foto')){$foto = $request->file('foto'); $filename = time() . '.' . $foto->getClientOriginalExtension(); Image::make($foto)->resize(264, 156)->save('img/widget/' . $filename); } else {$filename = null; } $homepage->foto = $filename; } if (isset($request->link)) {$homepage->link = $request->link; } if (isset($request->html)) {$homepage->html = $request->html; } $homepage->save(); return redirect()->action('homepage_widget@tampil');    } public function hapus(Request $request) {$homepage = homepage::find($request->id); $homepage->delete(); return redirect()->action('homepage_widget@tampil'); } }