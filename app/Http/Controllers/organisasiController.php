<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\organisasis; class organisasiController extends Controller {public function __construct() {$this->middleware('auth'); } public function tampil() {$organisasis = organisasis::all(); $org = organisasis::select('id','jabatan')->get(); return view('organisasi',['organisasis'=>$organisasis,'orgs'=>$org]); } public function tambah(Request $request) {$organisasis = new organisasis; $organisasis->nama = $request->nama; $organisasis->jabatan = $request->jabatan; $organisasis->nip = $request->nip; $organisasis->foto = $request->foto; if ($request->parent!=null) {$organisasis->parent_id = $request->parent; } $organisasis->save(); return redirect()->action('organisasiController@tampil'); } public function ubah(Request $request) {$organisasis = organisasis::find($request->id); $organisasis->nama = $request->nama; $organisasis->jabatan = $request->jabatan; $organisasis->nip = $request->nip; $organisasis->foto = $request->foto; if ($request->parent!= NULL) {$organisasis->parent_id = $request->parent; } else {$organisasis->parent_id = null; } $organisasis->save(); return redirect()->action('organisasiController@tampil'); } public function hapus(Request $request) {$organisasis = organisasis::find($request->id); $organisasis->delete(); return redirect()->action('organisasiController@tampil'); } }