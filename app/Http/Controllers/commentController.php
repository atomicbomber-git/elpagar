<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\comments; class commentController extends Controller {public function __construct() {$this->middleware('auth'); } public function tampil() {$comments = comments::with('post')->orderBy('created_at','desc')->get(); return view('comment',(['comments'=>$comments])); } public function tambah(Request $request) {try{$comments = new comments; $comments->id_posts = $request->id_posts; $comments->nama = $request->nama; $comments->email = $request->email; if ($request->judul!=null) {$comments->judul = $request->judul; } $comments->deskripsi = $request->deskripsi; $comments->read = 0; if ($request->parent!=null) {$comments->parent = $request->parent; } if ($request->foto!=null) {$comments->foto = $request->foto; } $comments->save(); return redirect()->action('commentController@tampil'); } catch(Exception $e){return $e; } } public function hapus(Request $request) {try{$comments = comments::find($request->id); $comments->delete(); return redirect()->action('commentController@tampil'); } catch(Exception $e){return $e; } } }